<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Nimbus SDK App Version Comparison"><meta name="keywords" content="rust, rustlang, rust-lang, versioning"><title>nimbus::versioning - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../nimbus/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../nimbus/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module versioning</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li></ul></div></section><div id="sidebar-vars" data-name="versioning" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../nimbus/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../index.html">nimbus</a>::<wbr><a class="mod" href="#">versioning</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/nimbus/versioning.rs.html#5-298">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h3 id="nimbus-sdk-app-version-comparison"><a href="#nimbus-sdk-app-version-comparison">Nimbus SDK App Version Comparison</a></h3>
<p>The Nimbus SDK supports comparing app versions that follow the Firefox versioning scheme.
This module was ported from the Firefox Desktop implementation. You can find the Desktop implementation
in <a href="https://searchfox.org/mozilla-central/rev/468a65168dd0bc3c7d602211a566c16e66416cce/xpcom/base/nsVersionComparator.cpp">this C++ file</a>
There’s also some more documentation in the <a href="https://searchfox.org/mozilla-central/rev/468a65168dd0bc3c7d602211a566c16e66416cce/xpcom/base/nsIVersionComparator.idl#9-31">IDL</a></p>
<h3 id="how-versioning-works"><a href="#how-versioning-works">How versioning works</a></h3>
<p>This module defines one main struct, the <a href="struct.Version.html" title="Version"><code>Version</code></a> struct. A version is represented by a list of
dot separated <strong>Version Parts</strong>s. When comparing two versions, we compare each version part in order.
If one of the versions has a version part, but the other has run out (i.e we have reached the end of the list of version parts)
we compare the existing version part with the default version part, which is the <code>0</code>. For example,
<code>1.0</code> is equivalent to <code>1.0.0.0</code>.</p>
<p>For information what version parts are composed of, and how they are compared, read the <a href="#the-version-part">next section</a>.</p>
<h4 id="example-versions"><a href="#example-versions">Example Versions</a></h4>
<p>The following are all valid versions:</p>
<ul>
<li><code>1</code> (one version part, representing the <code>1</code>)</li>
<li>`` (one version part, representing the empty string, which is equal to <code>0</code>)</li>
<li><code>12+</code> (one version part, representing <code>12+</code> which is equal to <code>13pre</code>)</li>
<li><code>98.1</code> (two version parts, one representing <code>98</code> and another <code>1</code>)</li>
<li><code>98.2pre1.0-beta</code> (three version parts, one for <code>98</code>, one for <code>2pre1</code> and one for <code>0-beta</code>)</li>
</ul>
<h3 id="the-version-part"><a href="#the-version-part">The Version Part</a></h3>
<p>A version part is made from 4 elements that directly follow each other:</p>
<ul>
<li><code>num_a</code>: A 32-bit base-10 formatted number that is at the start of the part</li>
<li><code>str_b</code>: A non-numeric ascii-encoded string that starts after <code>num_a</code></li>
<li><code>num_c</code>: Another 32-bit base-10 formatted number that follows <code>str_b</code></li>
<li><code>extra_d</code>: The rest of the version part as an ascii-encoded string</li>
</ul>
<p>When two version parts are compared, each of <code>num_a</code>, <code>str_b</code>, <code>num_c</code> and <code>extra_d</code> are compared
in order. <code>num_a</code> and <code>num_c</code> are compared by normal integer comparison, <code>str_b</code> and <code>extra_b</code> are compared
by normal byte string comparison.</p>
<h4 id="special-values-and-cases"><a href="#special-values-and-cases">Special values and cases</a></h4>
<p>There two special characters that can be used in version parts:</p>
<ol>
<li>The <code>*</code>. This can be used to represent the whole version part. If used, it will set the <code>num_a</code> to be
the maximum value possible (<a href="https://doc.rust-lang.org/1.60.0/std/primitive.i32.html#associatedconstant.MAX" title="i32::MAX"><code>i32::MAX</code></a>). This can only be used as the whole version part string. It will parsed
normally as the <code>*</code> ascii character if it is preceded or followed by any other characters.</li>
<li>The <code>+</code>. This can be used as the <code>str_b</code>. Whenever a <code>+</code> is used as a <code>str_b</code>, it increments the <code>num_a</code> by 1 and sets
the <code>str_b</code> to be equal to <code>pre</code>. For example, <code>2+</code> is the same as <code>3pre</code></li>
<li>An empty <code>str_b</code> is always <strong>greater</strong> than a <code>str_b</code> with a value. For example, <code>93</code> &gt; <code>93pre</code></li>
</ol>
<h3 id="example-version-comparisons"><a href="#example-version-comparisons">Example version comparisons</a></h3>
<p>The following comparisons are taken directly from <a href="https://searchfox.org/mozilla-central/rev/468a65168dd0bc3c7d602211a566c16e66416cce/xpcom/base/nsIVersionComparator.idl#9-31">the brief documentation in Mozilla-Central</a></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nimbus::versioning::Version</span>;
<span class="kw">let</span> <span class="ident">v1</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0pre1&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v2</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0pre2&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v3</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v4</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0.0&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v5</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0.0.0&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v6</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v7</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre0&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v8</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.0+&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v9</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre1a&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v10</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre1&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v11</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre10a&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">v12</span> <span class="op">=</span> <span class="ident">Version::try_from</span>(<span class="string">&quot;1.1pre10&quot;</span>).<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">v1</span> <span class="op">&lt;</span> <span class="ident">v2</span>);
<span class="macro">assert!</span>(<span class="ident">v2</span> <span class="op">&lt;</span> <span class="ident">v3</span>);
<span class="macro">assert!</span>(<span class="ident">v3</span> <span class="op">==</span> <span class="ident">v4</span>);
<span class="macro">assert!</span>(<span class="ident">v4</span> <span class="op">==</span> <span class="ident">v5</span>);
<span class="macro">assert!</span>(<span class="ident">v5</span> <span class="op">&lt;</span> <span class="ident">v6</span>);
<span class="macro">assert!</span>(<span class="ident">v6</span> <span class="op">==</span> <span class="ident">v7</span>);
<span class="macro">assert!</span>(<span class="ident">v7</span> <span class="op">==</span> <span class="ident">v8</span>);
<span class="macro">assert!</span>(<span class="ident">v8</span> <span class="op">&lt;</span> <span class="ident">v9</span>);
<span class="macro">assert!</span>(<span class="ident">v9</span> <span class="op">&lt;</span> <span class="ident">v10</span>);
<span class="macro">assert!</span>(<span class="ident">v10</span> <span class="op">&lt;</span> <span class="ident">v11</span>);
<span class="macro">assert!</span>(<span class="ident">v11</span> <span class="op">&lt;</span> <span class="ident">v12</span>);</code></pre></div>
<p>What the above is comparing is:
1.0pre1
&lt; 1.0pre2
&lt; 1.0 == 1.0.0 == 1.0.0.0
&lt; 1.1pre == 1.1pre0 == 1.0+
&lt; 1.1pre1a
&lt; 1.1pre1
&lt; 1.1pre10a
&lt; 1.1pre10</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Version.html" title="nimbus::versioning::Version struct">Version</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="nimbus" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>